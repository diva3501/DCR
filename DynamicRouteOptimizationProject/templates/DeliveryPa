<!DOCTYPE html>
<html lang="en">
<head>
    <title>Delivery Partner Page</title>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ google_maps_api_key }}&libraries=places"></script>
</head>
<body>
    {% include 'navbar.html' %}
    <h1>Delivery Route</h1>
    <div id="map" style="height: 500px; width: 100%;"></div>

    <script>
        async function fetchRoutes() {
            const response = await fetch(`/get_routes/2025-01-23`);
            const data = await response.json();

            if (data.message) {
                alert(data.message);
                return;
            }

            const map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: { lat: 12.9716, lng: 77.5946 }  // Adjust center
            });

            const routePath = new google.maps.Polyline({
                path: google.maps.geometry.encoding.decodePath(data.polyline),
                geodesic: true,
                strokeColor: '#FF0000',
                strokeOpacity: 1.0,
                strokeWeight: 2
            });

            routePath.setMap(map);
        }

        fetchRoutes();
    </script>
</body>
</html>
